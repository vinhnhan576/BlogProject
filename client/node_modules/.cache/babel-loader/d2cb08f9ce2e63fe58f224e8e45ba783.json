{"ast":null,"code":"import _defineProperty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{useRef}from\"react\";import{useDispatch}from\"react-redux\";import namingBlogSlug from\"../utils/namingSlugs\";import{getBlogBySlugAsync,createNewBlogAsync,updateBlogAsync}from\"../features/post/blogSlice\";import Helmet from\"../components/Helmet\";import{useNavigate,useParams}from\"react-router-dom\";import{useEffect}from\"react\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditBlog=function EditBlog(_ref){var alias=_ref.alias;var textareaRef=useRef();var imageRef=useRef();var dispatch=useDispatch();var navigate=useNavigate();var params=useParams();var slug=params.slug;var blog=useSelector(function(state){return state.blog;});var _useState=useState(blog),_useState2=_slicedToArray(_useState,2),newBlog=_useState2[0],setNewBlog=_useState2[1];useEffect(function(){if(newBlog.slug!==blog.slug||slug!==blog.slug){dispatch(getBlogBySlugAsync(slug));setNewBlog(blog);}},[slug,dispatch,blog,newBlog.slug]);var handleChange=function handleChange(input){return function(event){setNewBlog(_objectSpread(_objectSpread({},newBlog),{},_defineProperty({},input,event.target.value)));};};// const [image, setImage] = useState();\nvar readImage=function readImage(e){var image=e.target.files[0];};var imageUploadHandler=function imageUploadHandler(e){};var handleNewBlog=function handleNewBlog(e){e.preventDefault();dispatch(updateBlogAsync({blogReqData:newBlog}));navigate(\"/\".concat(alias,\"/\"));};return/*#__PURE__*/_jsx(Helmet,{title:\"Ch\\u1EC9nh s\\u1EEBa blog\",children:/*#__PURE__*/_jsx(\"div\",{className:\"new-blog\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"new-blog__form\",onSubmit:handleNewBlog,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:imageRef,onChange:readImage,className:\"new-blog__form__image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"quote\",onChange:handleChange(\"quote\"),className:\"new-blog__form__quote\",placeholder:\"Quote\",value:newBlog===null||newBlog===void 0?void 0:newBlog.quote}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",className:\"new-blog__form__place\",placeholder:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m\",onChange:handleChange(\"location\"),value:newBlog===null||newBlog===void 0?void 0:newBlog.location}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:\"new-blog__form__title\",placeholder:\"Ti\\xEAu \\u0111\\u1EC1\",onChange:handleChange(\"title\"),value:newBlog===null||newBlog===void 0?void 0:newBlog.title}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"content\",className:\"new-blog__form__body\",placeholder:\"N\\u1ED9i dung\",ref:textareaRef,value:newBlog===null||newBlog===void 0?void 0:newBlog.content,onChange:handleChange(\"content\"),onKeyUp:function onKeyUp(e){textareaRef.current.style.height=\"200px\";var height=e.target.scrollHeight;if(height>200){// textareaRef.current.style.height = \"auto\";\ntextareaRef.current.style.height=\"\".concat(height,\"px\");}}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"new-blog__form__signature\",placeholder:\"Ch\\u1EEF k\\xFD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"new-blog__form__create-button\",type:\"submit\",children:\"S\\u1EEDa b\\xE0i vi\\u1EBFt\"})]})})});};export default EditBlog;","map":{"version":3,"names":["React","useState","useRef","useDispatch","namingBlogSlug","getBlogBySlugAsync","createNewBlogAsync","updateBlogAsync","Helmet","useNavigate","useParams","useEffect","useSelector","EditBlog","alias","textareaRef","imageRef","dispatch","navigate","params","slug","blog","state","newBlog","setNewBlog","handleChange","input","event","target","value","readImage","e","image","files","imageUploadHandler","handleNewBlog","preventDefault","blogReqData","quote","location","title","content","current","style","height","scrollHeight"],"sources":["D:/Code/HTML/BlogProject/client/src/pages/EditBlog.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport namingBlogSlug from \"../utils/namingSlugs\";\r\nimport {\r\n\tgetBlogBySlugAsync,\r\n\tcreateNewBlogAsync,\r\n\tupdateBlogAsync,\r\n} from \"../features/post/blogSlice\";\r\nimport Helmet from \"../components/Helmet\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst EditBlog = ({ alias }) => {\r\n\tconst textareaRef = useRef();\r\n\tconst imageRef = useRef();\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\tconst params = useParams();\r\n\tconst slug = params.slug;\r\n\tconst blog = useSelector((state) => state.blog);\r\n\tconst [newBlog, setNewBlog] = useState(blog);\r\n\tuseEffect(() => {\r\n\t\tif (newBlog.slug !== blog.slug || slug !== blog.slug) {\r\n\t\t\tdispatch(getBlogBySlugAsync(slug));\r\n\t\t\tsetNewBlog(blog);\r\n\t\t}\r\n\t}, [slug, dispatch, blog, newBlog.slug]);\r\n\r\n\tconst handleChange = (input) => (event) => {\r\n\t\tsetNewBlog({ ...newBlog, [input]: event.target.value });\r\n\t};\r\n\t// const [image, setImage] = useState();\r\n\r\n\tconst readImage = (e) => {\r\n\t\tconst image = e.target.files[0];\r\n\t};\r\n\r\n\tconst imageUploadHandler = (e) => {};\r\n\r\n\tconst handleNewBlog = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(updateBlogAsync({ blogReqData: newBlog }));\r\n\t\tnavigate(`/${alias}/`);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Helmet title=\"Chỉnh sừa blog\">\r\n\t\t\t<div className=\"new-blog\">\r\n\t\t\t\t<form className=\"new-blog__form\" onSubmit={handleNewBlog}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tref={imageRef}\r\n\t\t\t\t\t\tonChange={readImage}\r\n\t\t\t\t\t\tclassName=\"new-blog__form__image\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"quote\"\r\n\t\t\t\t\t\tonChange={handleChange(\"quote\")}\r\n\t\t\t\t\t\tclassName=\"new-blog__form__quote\"\r\n\t\t\t\t\t\tplaceholder=\"Quote\"\r\n\t\t\t\t\t\tvalue={newBlog?.quote}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"location\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__place\"\r\n\t\t\t\t\t\tplaceholder=\"Địa điểm\"\r\n\t\t\t\t\t\tonChange={handleChange(\"location\")}\r\n\t\t\t\t\t\tvalue={newBlog?.location}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__title\"\r\n\t\t\t\t\t\tplaceholder=\"Tiêu đề\"\r\n\t\t\t\t\t\tonChange={handleChange(\"title\")}\r\n\t\t\t\t\t\tvalue={newBlog?.title}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__body\"\r\n\t\t\t\t\t\tplaceholder=\"Nội dung\"\r\n\t\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\t\tvalue={newBlog?.content}\r\n\t\t\t\t\t\tonChange={handleChange(\"content\")}\r\n\t\t\t\t\t\tonKeyUp={(e) => {\r\n\t\t\t\t\t\t\ttextareaRef.current.style.height = \"200px\";\r\n\t\t\t\t\t\t\tlet height = e.target.scrollHeight;\r\n\t\t\t\t\t\t\tif (height > 200) {\r\n\t\t\t\t\t\t\t\t// textareaRef.current.style.height = \"auto\";\r\n\t\t\t\t\t\t\t\ttextareaRef.current.style.height = `${height}px`;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}></textarea>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__signature\"\r\n\t\t\t\t\t\tplaceholder=\"Chữ ký\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button className=\"new-blog__form__create-button\" type=\"submit\">\r\n\t\t\t\t\t\tSửa bài viết\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</Helmet>\r\n\t);\r\n};\r\n\r\nexport default EditBlog;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}