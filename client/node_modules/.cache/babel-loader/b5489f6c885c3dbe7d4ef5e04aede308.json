{"ast":null,"code":"import _defineProperty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import Axios from'axios';import setAuthToken from'../../setAuthToken';import serverUrl from'../common';var accountUrl='api/account';export var setCurrentUser=function setCurrentUser(decoded){return{payload:decoded};};export var authenticateUserAsync=createAsyncThunk('auth/authenticateUserAsync',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var response,tasks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.post(serverUrl+'auth/login',user);case 2:response=_context.sent;tasks=response.data;return _context.abrupt(\"return\",{tasks:tasks});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var createNewAccountAsync=createAsyncThunk('api/user/createNewAccountAsync',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var account,response,tasks;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=_ref2.account;_context2.next=3;return Axios.post(serverUrl+accountUrl,account);case 3:response=_context2.sent;tasks=response.data;return _context2.abrupt(\"return\",{tasks:tasks});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());export var accountSlice=createSlice({name:'account',initialState:{account:null},reducers:{// login: (state, action) => {\n// \tconst data = {\n// \t\tusername: action.payload.username,\n// \t\tpassword: action.payload.password,\n// \t};\n// \tAxios.post(\"http://localhost:5000/auth\", { data })\n// \t\t.then((res) => {\n// \t\t\tif (res) {\n// \t\t\t\tstate.account = action.payload;\n// \t\t\t\tconsole.log(state.account);\n// \t\t\t} else state.account = null;\n// \t\t})\n// \t\t.catch((error) => {\n// \t\t\tconsole.log(error);\n// \t\t});\n// },\nlogout:function logout(state){state.account=null;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,authenticateUserAsync.fulfilled,function(state,action){console.log('Authenticated user successfully');var token=action.payload.tasks.token;localStorage.setItem('jwtToken',token);setAuthToken(token);if(action.payload.tasks)state.account=action.payload.tasks.account;else state.account=null;}),_defineProperty(_extraReducers,createNewAccountAsync.fulfilled,function(state,action){console.log('Created new account successfully');return action.payload.tasks.result;}),_extraReducers)});var logout=accountSlice.actions.logout;export{logout};export var selectAccount=function selectAccount(state){return state.account.account;};export default accountSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Axios","setAuthToken","serverUrl","accountUrl","setCurrentUser","decoded","payload","authenticateUserAsync","user","post","response","tasks","data","createNewAccountAsync","account","accountSlice","name","initialState","reducers","logout","state","extraReducers","fulfilled","action","console","log","token","localStorage","setItem","result","actions","selectAccount","reducer"],"sources":["D:/Code/HTML/BlogProject/client/src/features/account/accountSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport Axios from 'axios';\r\nimport setAuthToken from '../../setAuthToken';\r\nimport serverUrl from '../common';\r\n\r\nconst accountUrl = 'api/account';\r\n\r\nexport const setCurrentUser = (decoded) => {\r\n    return {\r\n        payload: decoded,\r\n    };\r\n};\r\n\r\nexport const authenticateUserAsync = createAsyncThunk(\r\n    'auth/authenticateUserAsync',\r\n    async (user) => {\r\n        const response = await Axios.post(serverUrl + 'auth/login', user);\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const createNewAccountAsync = createAsyncThunk(\r\n    'api/user/createNewAccountAsync',\r\n    async ({ account }) => {\r\n        const response = await Axios.post(serverUrl + accountUrl, account);\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const accountSlice = createSlice({\r\n    name: 'account',\r\n    initialState: {\r\n        account: null,\r\n    },\r\n    reducers: {\r\n        // login: (state, action) => {\r\n        // \tconst data = {\r\n        // \t\tusername: action.payload.username,\r\n        // \t\tpassword: action.payload.password,\r\n        // \t};\r\n        // \tAxios.post(\"http://localhost:5000/auth\", { data })\r\n        // \t\t.then((res) => {\r\n        // \t\t\tif (res) {\r\n        // \t\t\t\tstate.account = action.payload;\r\n        // \t\t\t\tconsole.log(state.account);\r\n        // \t\t\t} else state.account = null;\r\n        // \t\t})\r\n        // \t\t.catch((error) => {\r\n        // \t\t\tconsole.log(error);\r\n        // \t\t});\r\n        // },\r\n        logout: (state) => {\r\n            state.account = null;\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [authenticateUserAsync.fulfilled]: (state, action) => {\r\n            console.log('Authenticated user successfully');\r\n            const { token } = action.payload.tasks;\r\n            localStorage.setItem('jwtToken', token);\r\n            setAuthToken(token);\r\n            if (action.payload.tasks)\r\n                state.account = action.payload.tasks.account;\r\n            else state.account = null;\r\n        },\r\n        [createNewAccountAsync.fulfilled]: (state, action) => {\r\n            console.log('Created new account successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { logout } = accountSlice.actions;\r\n\r\nexport const selectAccount = (state) => state.account.account;\r\n\r\nexport default accountSlice.reducer;\r\n"],"mappings":"oYAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,aAAP,KAAyB,oBAAzB,CACA,MAAOC,UAAP,KAAsB,WAAtB,CAEA,GAAMC,WAAU,CAAG,aAAnB,CAEA,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAACC,OAAD,CAAa,CACvC,MAAO,CACHC,OAAO,CAAED,OADN,CAAP,CAGH,CAJM,CAMP,MAAO,IAAME,sBAAqB,CAAGR,gBAAgB,CACjD,4BADiD,4FAEjD,iBAAOS,IAAP,6JAC2BR,MAAK,CAACS,IAAN,CAAWP,SAAS,CAAG,YAAvB,CAAqCM,IAArC,CAD3B,QACUE,QADV,eAEUC,KAFV,CAEkBD,QAAQ,CAACE,IAF3B,iCAGW,CAAED,KAAK,CAALA,KAAF,CAHX,wDAFiD,+DAA9C,CASP,MAAO,IAAME,sBAAqB,CAAGd,gBAAgB,CACjD,gCADiD,6FAEjD,0KAASe,OAAT,OAASA,OAAT,wBAC2Bd,MAAK,CAACS,IAAN,CAAWP,SAAS,CAAGC,UAAvB,CAAmCW,OAAnC,CAD3B,QACUJ,QADV,gBAEUC,KAFV,CAEkBD,QAAQ,CAACE,IAF3B,kCAGW,CAAED,KAAK,CAALA,KAAF,CAHX,0DAFiD,iEAA9C,CASP,MAAO,IAAMI,aAAY,CAAGjB,WAAW,CAAC,CACpCkB,IAAI,CAAE,SAD8B,CAEpCC,YAAY,CAAE,CACVH,OAAO,CAAE,IADC,CAFsB,CAKpCI,QAAQ,CAAE,CACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAM,CAAE,gBAACC,KAAD,CAAW,CACfA,KAAK,CAACN,OAAN,CAAgB,IAAhB,CACH,CAnBK,CAL0B,CA0BpCO,aAAa,mDACRd,qBAAqB,CAACe,SADd,CAC0B,SAACF,KAAD,CAAQG,MAAR,CAAmB,CAClDC,OAAO,CAACC,GAAR,CAAY,iCAAZ,EACA,GAAQC,MAAR,CAAkBH,MAAM,CAACjB,OAAP,CAAeK,KAAjC,CAAQe,KAAR,CACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCF,KAAjC,EACAzB,YAAY,CAACyB,KAAD,CAAZ,CACA,GAAIH,MAAM,CAACjB,OAAP,CAAeK,KAAnB,CACIS,KAAK,CAACN,OAAN,CAAgBS,MAAM,CAACjB,OAAP,CAAeK,KAAf,CAAqBG,OAArC,CADJ,IAEKM,MAAK,CAACN,OAAN,CAAgB,IAAhB,CACR,CATQ,iCAURD,qBAAqB,CAACS,SAVd,CAU0B,SAACF,KAAD,CAAQG,MAAR,CAAmB,CAClDC,OAAO,CAACC,GAAR,CAAY,kCAAZ,EACA,MAAOF,OAAM,CAACjB,OAAP,CAAeK,KAAf,CAAqBkB,MAA5B,CACH,CAbQ,iBA1BuB,CAAD,CAAhC,CA2CA,GAAQV,OAAR,CAAmBJ,YAAY,CAACe,OAAhC,CAAQX,MAAR,C,eAEP,MAAO,IAAMY,cAAa,CAAG,QAAhBA,cAAgB,CAACX,KAAD,QAAWA,MAAK,CAACN,OAAN,CAAcA,OAAzB,EAAtB,CAEP,cAAeC,aAAY,CAACiB,OAA5B"},"metadata":{},"sourceType":"module"}