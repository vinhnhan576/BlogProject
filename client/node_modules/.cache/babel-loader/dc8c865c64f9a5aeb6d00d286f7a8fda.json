{"ast":null,"code":"import _slicedToArray from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useRef}from'react';import{useState}from'react';import Avatar from'react-avatar-edit';import{useDispatch}from'react-redux';import{updateUserAsync}from'../features/user/userSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Settings=function Settings(props){var dispatch=useDispatch();var _useState=useState(props.blogger.profilepic===undefined?require('../assets/image/user/alt.png'):'data:image/jpg;base64,'+props.blogger.profilepic),_useState2=_slicedToArray(_useState,2),src=_useState2[0],setSrc=_useState2[1];var _useState3=useState(props.blogger.profilepic===undefined?require('../assets/image/user/alt.png'):'data:image/jpg;base64,'+props.blogger.profilepic),_useState4=_slicedToArray(_useState3,2),newImg=_useState4[0],setNewImg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editting=_useState6[0],setEditting=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),file=_useState8[0],setFile=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),changeImg=_useState10[0],setChangeImg=_useState10[1];var editRef=useRef();var pfpRef=useRef();var onEditClick=function onEditClick(){setEditting(!editting);editRef.current.classList.toggle('editting');if(editting===false){editRef.current.innerHTML='&#10003;';}else{dispatch(updateUserAsync({id:props.blogger._id,userReq:{profilepic:file}}));setChangeImg(true);setSrc(newImg);editRef.current.innerHTML='Đổi ảnh';}};var onStopClick=function onStopClick(){setEditting(!editting);editRef.current.classList.toggle('editting');if(editting===false){editRef.current.innerHTML='&#10003;';}else{setChangeImg(false);editRef.current.innerHTML='Đổi ảnh';}};var onImageLoad=function onImageLoad(e){// setWidth()\nconsole.log(e);};return/*#__PURE__*/_jsxs(\"div\",{className:\"Settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Settings__left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Settings__left__pfp\",children:editting===true?/*#__PURE__*/_jsx(Avatar,{width:350,height:350,onCrop:function onCrop(e){return setNewImg(e);},onFileLoad:function onFileLoad(file){return setFile(file);}}):props.blogger.profilepic===undefined?/*#__PURE__*/_jsx(\"div\",{className:\"Settings__left__pfp__img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:changeImg===true?newImg:src,alt:\"\",ref:pfpRef})}):/*#__PURE__*/_jsx(\"div\",{className:\"Settings__left__pfp__img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:changeImg===true?newImg:src,alt:\"\",ref:pfpRef})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Settings__left__change\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Settings__left__change__edit\",onClick:onEditClick,ref:editRef,children:\"\\u0110\\u1ED5i \\u1EA3nh\"}),editting===true&&/*#__PURE__*/_jsx(\"div\",{className:\"Settings__left__change__stop\",onClick:onStopClick,children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Settings__right\"})]});};export default Settings;","map":{"version":3,"names":["React","useRef","useState","Avatar","useDispatch","updateUserAsync","Settings","props","dispatch","blogger","profilepic","undefined","require","src","setSrc","newImg","setNewImg","editting","setEditting","file","setFile","changeImg","setChangeImg","editRef","pfpRef","onEditClick","current","classList","toggle","innerHTML","id","_id","userReq","onStopClick","onImageLoad","e","console","log"],"sources":["D:/Code/HTML/BlogProject/client/src/pages/Settings.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useRef } from 'react';\r\nimport { useState } from 'react';\r\nimport Avatar from 'react-avatar-edit';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateUserAsync } from '../features/user/userSlice';\r\n\r\nconst Settings = (props) => {\r\n    const dispatch = useDispatch();\r\n\r\n    var [src, setSrc] = useState(\r\n        props.blogger.profilepic === undefined\r\n            ? require('../assets/image/user/alt.png')\r\n            : 'data:image/jpg;base64,' + props.blogger.profilepic\r\n    );\r\n    var [newImg, setNewImg] = useState(\r\n        props.blogger.profilepic === undefined\r\n            ? require('../assets/image/user/alt.png')\r\n            : 'data:image/jpg;base64,' + props.blogger.profilepic\r\n    );\r\n    var [editting, setEditting] = useState(false);\r\n    const [file, setFile] = useState();\r\n    const [changeImg, setChangeImg] = useState(false);\r\n    const editRef = useRef();\r\n    const pfpRef = useRef();\r\n\r\n    const onEditClick = () => {\r\n        setEditting(!editting);\r\n        editRef.current.classList.toggle('editting');\r\n        if (editting === false) {\r\n            editRef.current.innerHTML = '&#10003;';\r\n        } else {\r\n            dispatch(\r\n                updateUserAsync({\r\n                    id: props.blogger._id,\r\n                    userReq: { profilepic: file },\r\n                })\r\n            );\r\n            setChangeImg(true);\r\n            setSrc(newImg);\r\n            editRef.current.innerHTML = 'Đổi ảnh';\r\n        }\r\n    };\r\n\r\n    const onStopClick = () => {\r\n        setEditting(!editting);\r\n        editRef.current.classList.toggle('editting');\r\n        if (editting === false) {\r\n            editRef.current.innerHTML = '&#10003;';\r\n        } else {\r\n            setChangeImg(false);\r\n            editRef.current.innerHTML = 'Đổi ảnh';\r\n        }\r\n    };\r\n\r\n    const onImageLoad = (e) => {\r\n        // setWidth()\r\n        console.log(e);\r\n    };\r\n\r\n    return (\r\n        <div className=\"Settings\">\r\n            <div className=\"Settings__left\">\r\n                <div className=\"Settings__left__pfp\">\r\n                    {editting === true ? (\r\n                        <Avatar\r\n                            width={350}\r\n                            height={350}\r\n                            onCrop={(e) => setNewImg(e)}\r\n                            onFileLoad={(file) => setFile(file)}\r\n                        ></Avatar>\r\n                    ) : props.blogger.profilepic === undefined ? (\r\n                        <div className=\"Settings__left__pfp__img-container\">\r\n                            <img\r\n                                src={changeImg === true ? newImg : src}\r\n                                alt=\"\"\r\n                                ref={pfpRef}\r\n                            />\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"Settings__left__pfp__img-container\">\r\n                            <img\r\n                                src={changeImg === true ? newImg : src}\r\n                                alt=\"\"\r\n                                ref={pfpRef}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"Settings__left__change\">\r\n                    <div\r\n                        className=\"Settings__left__change__edit\"\r\n                        onClick={onEditClick}\r\n                        ref={editRef}\r\n                    >\r\n                        Đổi ảnh\r\n                    </div>\r\n                    {editting === true && (\r\n                        <div\r\n                            className=\"Settings__left__change__stop\"\r\n                            onClick={onStopClick}\r\n                        >\r\n                            &#x2715;\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"Settings__right\"></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Settings;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}